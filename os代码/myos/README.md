# Bochs æ“ä½œç³»ç»Ÿå­¦ä¹ é¡¹ç›®

å­¦ä¹ ã€Šæ“ä½œç³»ç»ŸçœŸè±¡è¿˜åŸã€‹çš„ä»£ç å®è·µé¡¹ç›®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ„å»º Docker é•œåƒï¼ˆåªéœ€ä¸€æ¬¡ï¼‰
```bash
cd /home/xuzichun/boch/bochs
docker build --build-arg HOST_UID=$(id -u) --build-arg HOST_GID=$(id -g) -t bochs-dev .
```

### 2. ç¼–è¯‘ä»£ç 
```bash
docker run --rm -v /home/xuzichun/boch/bochs:/home/xuzichun/boch bochs-dev bash -c \
  "cd /home/xuzichun/boch/chapter-7 && make clean && make all && make install"
```

### 3. è¿è¡Œ Bochs
```bash
cd /home/xuzichun/boch/bochs/chapter-7
/home/xuzichun/ä¸‹è½½/bochs-2.6.8/bochs -f bochsrc.disk -q
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
bochs/
â”œâ”€â”€ Dockerfile              # Docker é•œåƒé…ç½®
â”œâ”€â”€ hd60M.img              # ç¡¬ç›˜é•œåƒæ–‡ä»¶
â”œâ”€â”€ chapter-7/             # ç¬¬ä¸ƒç« ä»£ç 
â”‚   â”œâ”€â”€ boot/              # å¼•å¯¼ç¨‹åº
â”‚   â”œâ”€â”€ kernel/            # å†…æ ¸ä»£ç 
â”‚   â”œâ”€â”€ device/            # è®¾å¤‡é©±åŠ¨
â”‚   â”œâ”€â”€ lib/               # åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ build/             # ç¼–è¯‘è¾“å‡º
â”‚   â”œâ”€â”€ Makefile          # ç¼–è¯‘è„šæœ¬ â­
â”‚   â””â”€â”€ bochsrc.disk      # Bochs é…ç½® â­
â””â”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md        # è¯¦ç»†è¯´æ˜æ–‡æ¡£
```

## ğŸ“– æ–‡æ¡£

- **[é¡¹ç›®ç»“æ„è¯´æ˜.md](./é¡¹ç›®ç»“æ„è¯´æ˜.md)** - å®Œæ•´çš„é¡¹ç›®ç»“æ„å’Œ Makefile è¯´æ˜
- **[ç¬¬ä¸ƒç« å­¦ä¹ æŒ‡å—.md](./ç¬¬ä¸ƒç« å­¦ä¹ æŒ‡å—.md)** - ç¬¬ä¸ƒç« å­¦ä¹ æŒ‡å—
- **[ç¬¬ä¸ƒç« ä»£ç è¯´æ˜.md](./ç¬¬ä¸ƒç« ä»£ç è¯´æ˜.md)** - ç¬¬ä¸ƒç« ä»£ç è¯¦è§£

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### Makefile å‘½ä»¤
```bash
cd chapter-7
make all        # ç¼–è¯‘æ‰€æœ‰æ–‡ä»¶
make clean      # æ¸…ç†ç¼–è¯‘æ–‡ä»¶
make install    # å®‰è£…åˆ°ç¡¬ç›˜é•œåƒ
```

### Bochs è°ƒè¯•å‘½ä»¤
```
c               # ç»§ç»­è¿è¡Œ
s               # å•æ­¥æ‰§è¡Œ
b 0x7c00        # åœ¨åœ°å€è®¾ç½®æ–­ç‚¹
info r          # æŸ¥çœ‹å¯„å­˜å™¨
x /10xb 0x7c00  # æŸ¥çœ‹å†…å­˜
q               # é€€å‡º
```

## ğŸ’¡ å·¥ä½œæµç¨‹

1. **ç¼–è¾‘ä»£ç **ï¼šåœ¨ IDE ä¸­ä¿®æ”¹ `chapter-7/` ä¸‹çš„æºä»£ç 
2. **ç¼–è¯‘**ï¼šåœ¨ Docker å®¹å™¨ä¸­ä½¿ç”¨ Makefile ç¼–è¯‘
3. **è¿è¡Œ**ï¼šåœ¨å®¿ä¸»æœºä½¿ç”¨ Bochs è¿è¡Œå’Œè°ƒè¯•

## ğŸ¯ ä¸ºä»€ä¹ˆç”¨ Dockerï¼Ÿ

- âœ… ç»Ÿä¸€ç¼–è¯‘ç¯å¢ƒï¼ˆgcc-4.4ã€nasmï¼‰
- âœ… ä¸æ±¡æŸ“å®¿ä¸»æœº
- âœ… å¯ç§»æ¤æ€§å¼º

## ğŸ“š å­¦ä¹ èµ„æº

- ä¹¦ç±ï¼šã€Šæ“ä½œç³»ç»ŸçœŸè±¡è¿˜åŸã€‹
- å‚è€ƒé¡¹ç›®ï¼š`/home/xuzichun/boch/OS`
