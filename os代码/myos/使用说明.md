# 王老师
1. 在 chapter-X 目录编写代码
cd ~/真象还原/os代码/我的os/chapter-7

 2. 使用 Docker 编译
docker run --rm \
  -v /home/xuzichun/真象还原/os代码/我的os:/workspace \
  bochs-dev bash -c "cd /workspace/chapter-7 && make all"

 3. 将编译结果写入到 bochs 目录的硬盘镜像
dd if=build/mbr.bin of=~/真象还原/bochs/hd60M.img bs=512 count=1 conv=notrunc
dd if=build/loader.bin of=~/真象还原/bochs/hd60M.img bs=512 count=4 seek=2 conv=notrunc
dd if=build/kernel.bin of=~/真象还原/bochs/hd60M.img bs=512 count=200 seek=9 conv=notrunc

 4. 运行 bochs
cd ~/真象还原/bochs
bin/bochs -f bochsrc.disk

# makefile

# 1. 进入你的章节目录
cd ~/真象还原/os代码/我的os/chapter-7

# 2. 一键编译、安装、运行 (三合一!)
make run

---

# Chapter 15 (the_truth_of_operation_system)

## 使用 Docker 编译运行 chapter_15/k

### 方法 1: 使用 Docker 一键编译运行 (推荐)
```bash
# 进入 chapter_15/k 目录
cd ~/真象还原/os代码/the_truth_of_operation_system/chapter_15/k

# 使用 Docker 编译并写入硬盘镜像 (一键完成)
docker run --rm \
  -v "$(pwd)":/workspace \
  -v ~/真象还原/bochs:/bochs \
  myos-gcc:4.4 bash -c "cd /workspace && make all"

# 运行 bochs
cd ~/真象还原/bochs && bin/bochs -f bochsrc.disk
```

### 方法 2: 快捷脚本 (更简单!)
创建一个快捷脚本 `run_chapter15.sh`:
```bash
#!/bin/bash
# 用法: ./run_chapter15.sh k  (运行 chapter_15/k)

SUBDIR=${1:-k}
cd ~/真象还原/os代码/the_truth_of_operation_system/chapter_15/$SUBDIR

echo "正在编译 chapter_15/$SUBDIR..."
docker run --rm \
  -v "$(pwd)":/workspace \
  -v ~/真象还原/bochs:/bochs \
  myos-gcc:4.4 bash -c "cd /workspace && make all"

echo "编译完成! 启动 bochs..."
cd ~/真象还原/bochs && bin/bochs -f bochsrc.disk
```

使用方法:
```bash
# 给脚本执行权限
chmod +x run_chapter15.sh

# 运行 chapter_15/k
./run_chapter15.sh k

# 运行 chapter_15/a
./run_chapter15.sh a
```

### 其他 chapter_15 子目录 (a-k)
chapter_15 包含11个子目录 (a, b, c, d, e, f, g, h, i, j, k),每个代表不同的实现阶段。
按照上面的方法,进入对应子目录后执行 Docker 命令即可。


### 方法 1: 使用 Docker 一键编译运行 (推荐)
```bash
# 进入 chapter_15/k 目录
cd ~/真象还原/os代码/the_truth_of_operation_system/chapter_15/k

# 使用 Docker 编译并写入硬盘镜像 (一键完成)
docker run --rm \
  -v "$(pwd)":/workspace \
  -v ~/真象还原/bochs:/bochs \
  myos-gcc:4.4 bash -c "cd /workspace && make all"

# 运行 bochs
cd ~/真象还原/bochs && bin/bochs -f bochsrc.disk
```


### 方法 2: 快捷脚本 (更简单!)
创建一个快捷脚本 `run_chapter15.sh`:
```bash
#!/bin/bash
# 用法: ./run_chapter15.sh k  (运行 chapter_15/k)

SUBDIR=${1:-k}
cd ~/真象还原/os代码/the_truth_of_operation_system/chapter_15/$SUBDIR

echo "正在编译 chapter_15/$SUBDIR..."
docker run --rm \
  -v "$(pwd)":/workspace \
  -v ~/真象还原/bochs:/bochs \
  myos-gcc:4.4 bash -c "cd /workspace && make all"

echo "编译完成! 启动 bochs..."
cd ~/真象还原/bochs && bin/bochs -f bochsrc.disk
```

使用方法:
```bash
# 给脚本执行权限
chmod +x run_chapter15.sh

# 运行 chapter_15/k
./run_chapter15.sh k

# 运行 chapter_15/a
./run_chapter15.sh a
```

### 其他 chapter_15 子目录 (a-k)
chapter_15 包含11个子目录 (a, b, c, d, e, f, g, h, i, j, k),每个代表不同的实现阶段。
按照上面的方法,进入对应子目录后执行 Docker 命令即可。

