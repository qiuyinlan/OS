1. **段式重定位（Segmentation）**
    
    - 内核在加载时，程序分为不同段（如代码段 `.text`、数据段 `.data`、未初始化数据段 `.bss`）。
        
    - 每个段都有一个**段基址**（base address），CPU 通过段寄存器（如 `cs`、`ds`）指向段基址，再加上段内偏移来访问具体地址。
        
    - 这种方式允许内核被加载到内存的任意位置而无需修改段内偏移，段基址与段内偏移相加得到物理地址。
        
2. **分页机制（Paging）**
    
    - 在保护模式下，内核启用分页，虚拟地址通过页表映射到物理地址。
        
    - 页表分为一级页表和二级页表（或多级页表），每一页大小通常是 4KB。
        
    - 内核虚拟地址通常是**高地址区**（例如 Linux 的 `0xC0000000` 起始），映射到物理内存的低地址。
        
    - 当 CPU 访问虚拟地址时，TLB（快表）加速查找，最终转换为物理内存地址。
        
3. **内核加载过程**
    
    - 内核二进制（ELF 文件）会被 Loader 加载到内存中，ELF 的==可加载段（`PT_LOAD`）按照虚拟地址映射==。
        
    - 内核在初始化分页表时建立了**虚拟地址→物理地址的固定映射**，保证内核代码和数据可以在虚拟地址空间中安全访问对应的物理内存。
        

简单总结就是：**内核在初始化时通过段基址（分段）和页表（分页）建立虚拟地址到物理地址的映射**，==用户态程序==无法直接访问物理内存，而==内核==在虚拟地址空间中==统一==访问物理资源。