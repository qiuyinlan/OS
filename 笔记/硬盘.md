[[磁盘盘片-读取扇区CHSLBA]]
# 问题
讲讲硬盘的分类

# 磁盘

**磁盘**是一种**用==磁性材料存储数据==的介质**。  
它的共同特征是：

> 数据以磁化方向（0 和 1）来表示，依靠磁头读写。

常见的磁盘有两种：

| 名称     | 英文          | 特点                    |
| ------ | ----------- | --------------------- |
| **软盘** | Floppy Disk | 体积小、容量小（几十 MB），现在几乎淘汰 |
| **硬盘** | Hard Disk   | 外壳坚硬、容量大、速度快，是现在主流    |

所以可以说：

> **硬盘是磁盘的一种，只不过是“硬壳的磁盘”**。

# 硬盘分类

- **随机存取（Random Access）**：
    
    - 访问任何数据所需时间几乎相同，不再像磁带或鼓式存储那样线性扫描。
        
    - 这意味着程序设计中不必考虑存储时间的差异，算法设计更自由。



硬盘可以分为两大类：

| 类型                            | 说明              | 特点                   | 应用                   |
| ----------------------------- | --------------- | -------------------- | -------------------- |
| **==机械==硬盘 HDD**              | 内部有==旋转的磁盘和磁头== | 便宜、容量大，但速度==慢==、易损耗  |                      |
| **固态硬盘 SSD**<br>（固是为了凸显稳定与牢固） | 内部用闪存芯片存储       | 速度快、耐摔、功耗低，但成本高、容量稍小 | 要求快速存储的环境，如数据库、分布式系统 |


| 特性   | 闪存（SSD）         | 机械硬盘（HDD）      |
| ---- | --------------- | -------------- |
| 存储介质 | 电子晶体管           | 磁性盘片 + 磁头      |
| 速度   | 快（毫秒级/微秒级）      | 慢（寻道 + 转动，毫秒级） |
| 耐用性  | 高（抗震、==无机械故障==） | 低（机械部件易损）      |
| 容量   | 小~中（几十 GB~几 TB） | 大（几百 GB~几十 TB） |
| 价格   | 贵               | 便宜             |
| 功耗   | 低               | 高              |
| 随机访问 | 快（任意数据几乎瞬间访问）   | 慢（机械移动需要时间）    |


Hard Disk Drive, HDD 或 Solid State Drive
`Drive` 在这里不是指程序驱动，而是表示 **存储设备**，也就是 **驱动器**的意思，- 在英语里，**Drive** 原意是“驱动器、传动装置”
- 在电脑术语里，它表示**存储装置**，因为早期硬盘和软盘是通过机械马达==驱动==磁盘旋转来读写数据的
- 所以 **硬盘、光盘、U盘** 都可以叫做 Drive


严格来说，**SSD 不再是“磁盘”**，因为：

- 它**没有盘片**、也**不用磁性存储**；
    
- 它用的是 ==**闪存芯片（电子方式）** ==存储数据。
    

但因为历史原因，大家习惯了叫它：

> “固态硬盘（Solid State Drive）”  
> 即使它根本没有“盘” 😆

（补充：光盘-用激光刻录读写）

## 硬盘接口

硬盘通过接口和电脑主板连接。常见接口有：

|接口|说明|速度/特点|
|---|---|---|
|**ATA / PATA / IDE**|传统并行接口|速度慢，已淘汰|
|**SATA**|现代 2.5/3.5 英寸 HDD / SSD|最高约 600 MB/s|
|**M.2 SATA**|笔记本 SSD 插槽|与 SATA 同速，但更小|
|**M.2 NVMe (PCIe)**|高速 SSD|可达 7000 MB/s 以上|
|**外置 USB**|移动硬盘或 SSD|方便携带，速度取决于 USB 版本|


# 机械硬盘结构

柱面，磁头，扇区
cylinder,heads,sector


不同厂商、不同容量的盘会**映射成不同的逻辑CHS值**，举个例子：

| 厂商  | 实际结构（真实磁头/柱面/扇区）    | BIOS报告（逻辑CHS）        | 说明                  |
| --- | ------------------- | -------------------- | ------------------- |
| 厂商A | 4096柱面 × 8磁头 × 63扇区 | 1024柱面 × 32磁头 × 63扇区 | BIOS不支持太大柱面，厂商换算映射了 |
| 厂商B | 8192柱面 × 4磁头 × 63扇区 | 1024柱面 × 16磁头 × 63扇区 | 也是换映射方式让BIOS兼容      |



机械硬盘（HDD）是由很多精密的**机械和电子部件**组成的，主要部分如下：

### 1️⃣ 磁盘盘片（Disk Platters）

- 硬盘里有好几片**圆形的盘片**，像光盘一样叠在一起；
    
- 每个盘片表面涂有==**磁性材料**==，用来存储 0 和 1；
- 每一层的正反两面都可以存数据（上面一个磁头、下面一个磁头）
    
- 盘片高速旋转（常见 5400、7200 转/分钟）。
    

👉 一片盘可以存很多数据，**容量主要由盘片数量 + 密度**决定。

---

### 2️⃣ 磁头（Read/Write Head）

- 磁头非常靠近盘面（距离约 0.003 毫米！），==但不接触==；
    
- **写数据时**：磁头改变盘面某个微小区域的磁化方向（表示 0 或 1）；
    
- **读数据时**：磁头感应磁化方向变化读取数据。
    

👉 每个盘面有一个磁头，所以如果有 3 片盘，就有 6 个磁头。

---

### 3️⃣ 主轴马达（Spindle Motor）

这些盘片在中心有一个“共同的轴心”，  
读写的时候它们**一起旋转**！

- 驱动盘片旋转；
    
- 转得越快，读取速度越高。
    

---

 4️⃣ 执行机构（Actuator）

- 控制磁头在盘面上移动；
    
- 磁头通过**执行臂**快速定位到不同的磁道上。
    

---
 5️⃣ 控制电路板（Controller Board）

- 位于硬盘底部；
    
- 包含主控芯片、缓存（一般 8MB～256MB）、接口控制器（如 SATA）；
    
- 负责和主板通信、管理读写、错误校验、缓存加速等功能。

## 硬盘基本工作原理

1. **盘片**固定在主轴上高速旋转
    
2. **磁头**悬浮在盘片表面
    
3. **磁头臂**沿盘片径向移动，选择扇区
    
4. 数据读取/写入通过磁头磁化盘片表面磁性物质完成
    

📌 机械硬盘的关键性能指标：

- **寻道时间**：磁头移动到目标扇区所需时间
    
- **转速**：盘片旋转速度，影响顺序读写速度
    
- **缓存**：加速数据传输


# 硬盘控制器

### 1.硬盘控制器是什么
- 硬盘控制器就是==**CPU 和硬盘之间io接口==
    

### 2. 端口寄存器

- 控制器里有一些“寄存器”，就像小格子：
    
    - **命令块寄存器（Command Block）**：告诉硬盘你要做什么。
        
    - **控制块寄存器（Control Block）**：检查硬盘状态，或者控制一些特殊功能。
        

### 3. 常用寄存器

|寄存器|用途|
|---|---|
|Data|读写扇区的数据|
|Error/Feature|查询错误 / 设置一些命令参数|
|Sector Count|要读/写的扇区数量|
|LBA Low/Mid/High|LBA 地址低 24 位|
|Device|确定是主盘还是从盘，以及 LBA 高 4 位|
|Status/Command|查询状态 / 下命令|


